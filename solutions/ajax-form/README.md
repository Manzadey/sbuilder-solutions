# Отправка форм с помощью AJAX

1. Создаем **ПУСТУЮ** страницу которая будет принимать запросы на отправку формы **/ajax/**
2. В необходимом модуле создаем техническую форму с скрытым полем где указан **pl_plugin_ident** и добавляем системное сообщение если нужно: {MESSAGE}
3. Прикрепляем скрипт JS на страницу где будет обработка аякс формы - **ajax-form.js**
4. В нужной форме которая будет отправляться через аякс добавить аттрибут **action="/ajax/"** скрытое поле **pl_plugin_ident** из технической формы на странице **/ajax/**
5. Готово! 

Пример формы:
```html
<form action="/ajax/">
  <input type='hidden' name='pl_plugin_ident' value='f3bf30f45afcf5ba0be3d5e00cbeccd9' />
  <submit type="submit">Send form</submit>
</form>
```


# Дебаг форм

Для того чтобы проверить наличие обработку форм на странице пропишите в гет параметров *debug_ajax*

Будет выведена информация по найденым формам.

![image](https://user-images.githubusercontent.com/114495719/203943034-b0034873-cc47-4081-99e4-2c6c3e8d6aec.png)



# Отслеживание событий отправки формы

Для того чтобы отследить успешную или неуспешную отправку формы необходимо написать скрипт, который будет отслеживать события отправленных форм, например:

```js
document.addEventListener('ajax', () => {
    console.log('Success!');
});

document.addEventListener('ajax_failed', () => {
    console.log('Failed!');
});
```

Информация о событиях для каждой формы указаны в дебаг информации.

## Унификация форм и событий обработки
Чтобы обработать форму отдельно от остальных, необходимо в теге ``<form>`` добавить уникальный идентификатор. Информации о наименовании событий можно найти в консоли при помощи дебагера (см. пункт "Дебаг форм").

Чтобы обработать группу форм отдельно от остальных, добавьте в тег ``<form>`` атрибут ``data-ajax="name"``. Информации о наименовании событий можно найти в консоли при помощи дебагера (см. пункт "Дебаг форм").
